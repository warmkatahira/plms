import{C as u,c as r}from"./color-Cr0TjCwm.js";import{s as c}from"./loading-CLXJ3Lsj.js";let l=null;$(document).ready(function(){$("#abc_analysis_chart").length&&p()});function p(){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/abc_analysis/ajax_get_chart_data",type:"GET",data:{},dataType:"json",success:function(t){try{d(t)}catch{alert("オブジェクトの生成に失敗しました。")}},error:function(){alert("オブジェクトの生成に失敗しました。")}})}function d(o){l&&l.destroy();let t=[];$.each(o.result,function(a,s){t.push(s.item_name)});const n={labels:t,datasets:[...h(o.result),y(o.result)]},e=document.getElementById("abc_analysis_chart"),i=e.getContext("2d");e.width=Math.max(1200,o.result.length*40),e.height=600,l=new u(i,{data:n,options:{responsive:!1,scales:{"y-axis-quantity":{type:"linear",position:"left",ticks:{max:500,min:0,stepSize:50,precision:0,callback:function(a){return Number.isInteger(a)?a:null}},grid:{drawOnChartArea:!1}},"y-axis-ratio":{type:"linear",position:"right",ticks:{max:100,min:0,stepSize:10,precision:0,callback:function(a){return Number.isInteger(a)?a:null}}},x:{ticks:{autoSkip:!1}}},plugins:{legend:{labels:{usePointStyle:!0}},tooltip:{bodyFont:{size:16},titleFont:{size:18},padding:12,boxPadding:6}}}})}function h(o){let t=[],n=[],e=[];return $.each(o,function(i,a){switch(a.rank){case"A":t.push(a.total_ship_quantity),n.push(null),e.push(null);break;case"B":t.push(null),n.push(a.total_ship_quantity),e.push(null);break;case"C":t.push(null),n.push(null),e.push(a.total_ship_quantity);break}}),[{type:"bar",label:"Aランク",data:t,backgroundColor:r[1].backgroundColor,borderColor:r[1].borderColor,yAxisID:"y-axis-quantity"},{type:"bar",label:"Bランク",data:n,backgroundColor:r[2].backgroundColor,borderColor:r[2].borderColor,yAxisID:"y-axis-quantity"},{type:"bar",label:"Cランク",data:e,backgroundColor:r[3].backgroundColor,borderColor:r[3].borderColor,yAxisID:"y-axis-quantity"}]}function y(o){let t=[];return $.each(o,function(n,e){let i=e.cumulative_ratio;t.push(i)}),{type:"line",label:"累積構成比",data:t,borderColor:r[0].borderColor,backgroundColor:r[0].backgroundColor,pointBackgroundColor:r[0].borderColor,pointRadius:5,pointHoverRadius:7,yAxisID:"y-axis-ratio"}}$(".display_switch").on("click",function(){c()});tippy(".tippy_disp_type_list",{content:"リスト表示",duration:500,maxWidth:"none",allowHTML:!0,placement:"right",theme:"tippy_main_theme"});tippy(".tippy_disp_type_chart",{content:"グラフ表示",duration:500,maxWidth:"none",allowHTML:!0,placement:"right",theme:"tippy_main_theme"});
