import{s}from"./loading-CLXJ3Lsj.js";function a(){const n=$(".route_detail_div").length;$(".route_detail_div").each(function(t){$(this).find("p.text-base").text("ルート詳細 "+(t+1));let e=$(this).find(".delete_route_detail_btn");e.length===0&&($(this).find("div.flex.justify-between").append('<button type="button" class="delete_route_detail_btn btn bg-red-500 text-white px-2 py-1 rounded text-xs">削除</button>'),e=$(this).find(".delete_route_detail_btn")),n===1?e.hide():e.show()})}$("#add_route_detail_btn").on("click",function(){const t=$(".route_detail_div").last().clone();t.find("select, input").val(""),t.find(".bg-gray-300").removeClass("bg-gray-300"),t.find(":disabled").prop("disabled",!1),$("#route_detail_wrapper").append(t),a()});$("#route_detail_wrapper").on("click",".delete_route_detail_btn",function(){$(this).closest(".route_detail_div").remove(),a()});a();$("#route_detail_update_enter").on("click",function(){const n="/route_detail_update/ajax_validation",t=_();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:n,type:"GET",data:t,dataType:"json",success:function(e){window.confirm("ルート詳細の更新を実行しますか？")===!0&&(s(),$("#route_detail_update_form").submit())},error:function(e){if(e.status===422){const i=e.responseJSON.errors;let o="";$.each(i,function(r,d){const l=r.match(/\.(\d+)$/),u=parseInt(l[1],10)+1;o+=`ルート詳細 ${u}: ${d[0]}
`}),alert(o)}else alert("通信エラーが発生しました。")}})});$(document).on("change",'input[name="departure_time[]"], input[name="arrival_time[]"]',function(){$(this).attr("value",$(this).val())});function _(){return{route_id:$("#route_id").val(),boarding_location_id:$("select[name='boarding_location_id[]']").map(function(){return $(this).val()}).get(),stop_order:$("input[name='stop_order[]']").map(function(){return $(this).val()}).get(),arrival_time:$("input[name='arrival_time[]']").map(function(){return $(this).val()}).get(),departure_time:$("input[name='departure_time[]']").map(function(){return $(this).val()}).get()}}
